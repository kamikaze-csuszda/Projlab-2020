package Characters;
import java.util.ArrayList;
import java.util.IntSummaryStatistics;

import com.sun.jdi.Type;

import Ice.Ice;
import Item.Gun;
import Item.Item;
import Main.Game;
import Strategy.DigStrategy;
import Strategy.HelpStrategy;
import Strategy.NoDivingSuit;
import Strategy.NoRopeHelp;
import Strategy.NoShovelDig;
import Strategy.WaterStrategy;

//
//
//  Generated by StarUML(tm) Java Add-In
//
//  @ Project : Untitled
//  @ File Name : Character.java
//  @ Date : 2020-03-28
//  @ Author : 
//
//




public abstract class Character implements Movable
{
	private int bodywarmth;
	private int action;
	private Ice ice;
	private ArrayList<Item> equipment;
	private HelpStrategy helpStrategy;
	private DigStrategy digStrategy;
	private WaterStrategy waterStrategy; 
	
	/**
	 * default konstruktora a Characternek
	 */
	public Character()
	{
		bodywarmth = 4;
		action = 4;
		equipment = new ArrayList<Item>();
		NoRopeHelp nrh = new NoRopeHelp();
		helpStrategy = nrh;
		NoShovelDig nsd = new NoShovelDig();
		digStrategy = nsd;
		NoDivingSuit nds = new NoDivingSuit();
		waterStrategy = nds;
	}
	/**
	 * A karakter egy paraméteres konstruktora
	 * @param bodywarmth
	 */
	public Character(int bodywarmth)
	{
		this();
		this.bodywarmth = bodywarmth;
	}
	/**
	 * A karakter két paraméteres konstruktora
	 * @param i
	 * @param bodywarmth
	 */
	public Character(Ice i, int bodywarmth)
	{
		this(bodywarmth);
		ice = i;
		i.addCharacter(this);
	}
	/**
	 * Getter az aktualis jegtablara
	 * @return: Visszaadja az aktualis jegtablat, amin a Character all 
	 */
	public Ice getIce()
	{
		System.out.println("--> getIce()");
		System.out.println("<-- i");
		return ice;
	}
	
	public int getAction()
	{
		System.out.println("--> getAction()");
		System.out.println("<-- " + action);
		return action;
	}
	
	public void resetAction()
	{
		System.out.println("--> resetAction()");
		action = 4;
		System.out.println("<--");
	}
	
	public void decAction()
	{
		System.out.println("--> decAction()");
		action -=1;
		System.out.println("<--");
	}
	
	public void dig()
	{
		System.out.println("--> dig()");
		digStrategy.dig(this);
		System.out.println("<--");
	}
	
	public void breakIce()
	{
		System.out.println("--> breakIce()");
		int snow = ice.getSnow();
		
		if(snow==0) 
			ice.breakIce();
		decAction();
		System.out.println("<--");
	}
	
	public void itemPickup(int i)
	{
		System.out.println("--> itemPickup()");
		try {
		if(equipment.size()<=4 && ice.getItem(i).getFrozen()==false) {
			addItem(ice.getItem(i));
			ice.removeItem(ice.getItem(i));
				} 
			}catch (Exception e) {
				System.out.println(e.getMessage());
			}
		System.out.println("<--");
	}
	
	public void addItem(Item i)
	{
		System.out.println("--> addItem(i)");
		equipment.add(i);
		i.setCharacter(this);
		System.out.println("<--");
	}
	
	public void assembleGun(Gun g1, Gun g2, Gun g3)
	{
		System.out.println("--> assembleGun(g1, g2, g3)");
		System.out.println("<--");
	}
	
	public void removeItem(Item i)
	{
		System.out.println("--> removeItem(i)");
		i.discard();
		equipment.remove(i);
		System.out.println("<--");
	}
	
	public void itemDiscard(Item i)
	{
		System.out.println("--> itemDiscard(i)");
		ice.addItem(i);
		removeItem(i);
		System.out.println("<--");
	}
	
	public void itemGive(Character c, Item i)
	{
		System.out.println("--> itemGive(c, i)");
		removeItem(i);
		c.addItem(i);
		System.out.println("<--");
	}
	
	public void moveTo(Ice i)
	{
		System.out.println("--> moveTo(i)");
		ice.removeCharacter(this);
		i.addCharacter(this);
		setIce(i);
		System.out.println("<--");
	}
	
	public void setIce(Ice i)
	{
		System.out.println("--> setIce(i)");
		ice = i;
		System.out.println("<--");
	}
	
	public void setHelpStrategy(HelpStrategy hs)
	{
		System.out.println("--> setHelpStrategy(hs)");
		helpStrategy = hs;
		System.out.println("<--");
	}
	
	public void setDigStrategy(DigStrategy ds)
	{
		System.out.println("--> setDigStrategy(ds)");
		digStrategy = ds;
		System.out.println("<--");
	}
	
	public void setWaterStrategy(WaterStrategy ws)
	{
		System.out.println("--> setWaterStrategy(ws)");
		waterStrategy = ws;
		System.out.println("<--");
	}
	
	public int getWarmth()
	{
		System.out.println("--> getWarmth()");
		System.out.println("<-- " + bodywarmth);
		return bodywarmth;
	}
	public Item getItem(int i)
	{
		return equipment.get(i);
	}
	public void warmup()
	{
		System.out.println("--> warmup()");
		for (int i = 0; i < 3; i++) {
			decAction();
		}
		warmthInc();
		System.out.println("<--");
	}
	
	public void warmthDec()
	{
		System.out.println("--> warmthDec()");
		bodywarmth -=1;
		if (bodywarmth == 0) {
			die();
		}
		System.out.println("<--");
	}
	
	public void warmthInc()
	{
		System.out.println("--> warmthInc()");
		bodywarmth +=1;
		System.out.println("<--");
	}
	
	public void move(int d)
	{
		System.out.println("--> move(" + d + ")");  //konkrét szám kell majd ide
		try {
		
			ice.getNeighbour(d).moveHere(this);
			ice.removeCharacter(this);
			setIce(ice.getNeighbour(d));
		} catch (Exception e) {
			System.out.println(e.getMessage());
		}
		System.out.println("<--");
	}
	
	public boolean help(Character c1)
	{
		System.out.println("--> help(c1)");
		boolean result = helpStrategy.help(c1, this);
		System.out.println("<--" + result);
		return result;
	}
	
	public void fallInWater() throws Exception
	{
		System.out.println("--> fallInWater()");
		waterStrategy.fallInWater(this);
		System.out.println("<--");
	}
	
	public void die()
	{
		System.out.println("--> die()");
		System.out.println("<--");
	}
}
